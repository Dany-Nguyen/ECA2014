<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Fichier de base D3</title>
	<script src="http://d3js.org/d3.v3.js"type="text/javascript"></script>
	<script type="text/javascript">
		function drawPie() {

			var width = 500,
			height = 500,
			radius = 200,

			/*Données output.arff*/
			nbBien = 2896,
			nbNeutre = 595,
			nbMauvais = 1280,

			/*color = d3.scale.category20c();*/
			color = ["#6897bb", "#cccccc", "#f96161"];

			/*Données JSON*/
			data = [{"classe":"bien", "valeur":nbBien}, 
			{"classe":"neutre", "valeur":nbNeutre}, 
			{"classe":"mauvais", "valeur":nbMauvais}];

			var vis = d3.select("body")
			.append("svg:svg")
			.data([data])
			.attr("width", width) 
			.attr("height", height)
			.append("svg:g")      
			.attr("transform", "translate(" + radius + "," + radius + ")")

			var arc = d3.svg.arc()
			.outerRadius(radius);
			var pie = d3.layout.pie()
			.value(function(d) { return d.valeur; });

			var arcs = vis.selectAll("g.slice")
			.data(pie)
			.enter()
			.append("svg:g")
			.attr("class", "slice");

			arcs.append("svg:path")
			.attr("fill", function(d, i) { return color[i]; } )
			.attr("d", arc);

			arcs.append("svg:text")
			.attr("transform", function(d) {
				d.innerRadius = 0;
				d.outerRadius = radius;
				return "translate(" + arc.centroid(d) + ")";
			})
			.attr("text-anchor", "middle")
			.text(function(d, i) { 
				var percentage = (data[i].valeur / (nbBien + nbNeutre + nbMauvais) ) * 100;
				return data[i].classe+" "+Math.round(percentage)+"%"; 
			});
		}

/*TODO FINIR CE DRAWBAR + WORDCOUNT PAR CLASSE */
		function drawBar() {

			var data = [-15, -20, -22, -18, 2, 6, -26, -18];

			var margin = {top: 30, right: 10, bottom: 10, left: 30},
			width = 960 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;

			var x0 = Math.max(Math.abs(d3.min(data)), Math.abs(d3.max(data)));

			var x = d3.scale.linear()
			.domain([-x0, x0])
			.range([0,width]);

			var y = d3.scale.ordinal()
			.domain(d3.range(data.length))
			.rangeRoundBands([0, width], .2);

			var xAxis = d3.svg.axis()
			.scale(y)
			.orient("left");

			var svg = d3.select("body").append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom)
			.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

			svg.selectAll(".bar")
			.data(data)
			.enter().append("rect")
			.attr("class", function(d) { return d.value < 0 ? "bar negative" : "bar positive"; })
			.attr("x", function(d) { return x(Math.min(0, d.value)); })
			.attr("y", function(d) { return y(d.name); })
			.attr("width", function(d) { return Math.abs(x(d.value) - x(0)); })
			.attr("height", y.rangeBand());

			svg.append("g")
			.attr("class", "x axis")
			.call(xAxis);

			svg.append("g")
			.attr("class", "y axis")
			.append("line")
			.attr("y1", x(0))
			.attr("y2", x(0))
			.attr("x1", 0)
			.attr("x2", height);

			function type(d) {
				d.value = +d.value;
				return d;
			}
		}
	</script>

	<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

</head>
<body> 

	<style> 
		body {
			font-family:"Open Sans";
		} 

		.bar.positive {
			fill: #6897bb;
		}

		.bar.negative {
			fill: #f96161;
		}

		.axis path,
		.axis line {
			fill: none;
			stroke: #000;
			shape-rendering: crispEdges;
		}
	</style>

	<script type="text/javascript">
		drawPie();
		drawBar();
	</script>
</body>
<html>
<!-- http://jsfiddle.net/H2SKt/1/  -->
<!--
bien 2896
neutre 595
mauvais 1280 
-->

